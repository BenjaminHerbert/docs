version: "2"
services:

  sitesearch:
    image: quay.io/giantswarm/sitesearch:6bb6daa8fd02530b319f27b0eacf84df3c785693

  content:
    image: quay.io/giantswarm/docs

  proxy:
    image: registry.giantswarm.io/giantswarm/docs-proxy
    depends_on:
     - "sitesearch"
     - content
    ports:
     - "80:80"

  indexer:
    image: registry.giantswarm.io/giantswarm/docs-indexer:e5b2cb7ad5c1acdf5d2cfeefe6149bcd36f8fe80
    depends_on:
      - "sitesearch"
    environment:
      REPOSITORY_URL: https://github.com/giantswarm/docs-content.git
      REPOSITORY_BRANCH: master
      REPOSITORY_SUBFOLDER: content
      EXTERNAL_REPOSITORY_SUBFOLDER: docs
      KEEP_PROCESS_ALIVE: "True"
      ELASTICSEARCH_ENDPOINT: http://admin:e4dfbjb3rohi8qpoadsffodin@sitesearch:9200
