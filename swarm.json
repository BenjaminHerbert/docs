{
    "name": "docs",
    "components": {
        "proxy": {
            "image": "$proxy_image",
            "ports": 80,
            "links": [
                {
                    "component": "content-master",
                    "target_port": 80,
                    "alias": "docsmaster"
                },
                {
                    "component": "content-slave",
                    "target_port": 80,
                    "alias": "docsslave"
                },
                {
                    "component": "sitesearch",
                    "target_port": 9200
                }
            ],
            "domains": {
                "80": "$domain_name"
            }
        },
        "content-master": {
            "image": "$content_image",
            "ports": 80,
            "env": {
                "BASE_URL": "https://$domain_name"
            },
            "links": [
                {
                    "component": "sitesearch",
                    "target_port": 9200
                }
            ]
        },
        "content-slave": {
            "image": "$content_image",
            "ports": 80,
            "env": {
                "BASE_URL": "https://$domain_name"
            }
        },
        "sitesearch": {
            "image": "$sitesearch_image",
            "ports": 9200,
            "volumes": [
                {
                    "path": "/data",
                    "size": "2 GB"
                }
            ]
        }
    }
}
