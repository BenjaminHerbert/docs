{
    "name": "docs",
    "components": {
        "proxy": {
            "image": "$proxy_image",
            "ports": 80,
            "links": [
                {
                    "component": "content",
                    "target_port": 80
                },
                {
                    "component": "sitesearch",
                    "target_port": 9200
                }
            ],
            "domains": {
                "80": "$domain_name"
            }
        },
        "content": {
            "image": "$content_image",
            "ports": 80
        },
        "sitesearch": {
            "image": "$sitesearch_image",
            "ports": 9200,
            "volumes": [
                {
                    "path": "/data",
                    "size": "2 GB"
                }
            ]
        },
        "indexer": {
            "image": "$indexer_image",
            "links": [
                {
                    "component": "sitesearch",
                    "target_port": 9200
                }
            ],
            "env": {
                "ELASTICSEARCH_ENDPOINT": "$ELASTICSEARCH_ENDPOINT",
                "REPOSITORY_URL": "$REPOSITORY_URL",
                "REPOSITORY_BRANCH": "$REPOSITORY_BRANCH",
                "REPOSITORY_SUBFOLDER": "$REPOSITORY_SUBFOLDER",
                "EXTERNAL_REPOSITORY_SUBFOLDER": "$EXTERNAL_REPOSITORY_SUBFOLDER",
                "KEEP_PROCESS_ALIVE": "$KEEP_PROCESS_ALIVE"
            }
        }
    }
}
